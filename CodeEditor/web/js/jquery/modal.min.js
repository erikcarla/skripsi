(function(a){var q={prompt:function(d){var b=a.extend({Message:"",OkText:"<u>O</u>K",Action:function(a){},OnInit:null,OnShow:null,OnClose:null},d);null!=b.OnInit&&b.OnInit();var f=a("<div id='rst-alert' />");f.appendTo(a("body"));d=a("<div id='rst-alert-content'></div>");d.appendTo(f);var c=a("<div id='rst-alert-msg'></div>");c.appendTo(d);var e=a("<input id='rst-alert-input' style='display: block;' />"),l=a("<div id='rst-alert-ctrl'></div>");l.appendTo(d);var h=a("<button id='rst-alert-okbtn' accesskey='O' autofocus='autofocus'>"+
b.OkText+"</button>");h.appendTo(l);c.html(b.Message);e.appendTo(c);f.fadeIn({complete:function(){null!=b.OnShow&&b.OnShow()}});d.css({top:f.height()/2-d.height()/2,left:f.width()/2-d.width()/2});h.focus();h.click(function(){b.Action(e.val());f.remove();null!=b.OnClose&&b.OnClose()})},confirm:function(d){var b=a.extend({Message:"",YesText:"<u>Y</u>es",NoText:"<u>N</u>o",CancelText:"<u>C</u>ancel",Action:function(a){},OnInit:null,OnShow:null,OnClose:null},d);null!=b.OnInit&&b.OnInit();var f=a("<div id='rst-alert' />");
f.appendTo(a("body"));d=a("<div id='rst-alert-content'></div>");d.appendTo(f);var c=a("<div id='rst-alert-msg'></div>");c.appendTo(d);var e=a("<div id='rst-alert-ctrl'></div>");e.appendTo(d);var l=a("<button id='rst-alert-yesbtn' accesskey='Y' autofocus='autofocus'>"+b.YesText+"</button>");l.appendTo(e);var h=a("<button id='rst-alert-nobtn' accesskey='N'>"+b.NoText+"</button>");h.appendTo(e);var g=a("<button id='rst-alert-cancelbtn' accesskey='C'>"+b.CancelText+"</button>");g.appendTo(e);c.html(b.Message);
f.fadeIn({complete:function(){null!=b.OnShow&&b.OnShow()}});d.css({top:f.height()/2-d.height()/2,left:f.width()/2-d.width()/2});l.focus();l.click(function(){b.Action(!0);f.remove();null!=b.OnClose&&b.OnClose()});h.click(function(){b.Action(!1);f.remove();null!=b.OnClose&&b.OnClose()});g.click(function(){f.remove();null!=b.OnClose&&b.OnClose()})},alert:function(d){var b=a.extend({Message:"",OkText:"<u>O</u>K",OnInit:null,OnShow:null,OnClose:null},d);null!=b.OnInit&&b.OnInit();var f=a("<div id='rst-alert' />");
f.appendTo(a("body"));d=a("<div id='rst-alert-content'></div>");d.appendTo(f);var c=a("<div id='rst-alert-msg'></div>");c.appendTo(d);var e=a("<div id='rst-alert-ctrl'></div>");e.appendTo(d);var l=a("<button id='rst-alert-okbtn' accesskey='O' autofocus='autofocus'>"+b.OkText+"</button>");l.appendTo(e);c.html(b.Message);f.fadeIn({complete:function(){null!=b.OnShow&&b.OnShow()}});d.css({top:f.height()/2-d.height()/2,left:f.width()/2-d.width()/2});l.focus();l.click(function(){f.remove();null!=b.OnClose&&
b.OnClose()})},close:function(d){return this.each(function(){var b=a("#rst-modal");b.hide().fadeOut({complete:function(){"inline"==b.data("modalbox").options.Type&&(a("#rst-modal > #rst-modal-shadow > #rst-modal-content").children().hide(),a("#rst-modal > #rst-modal-shadow > #rst-modal-content").children().appendTo(b.parent()),b.appendTo(a("body")));a("#rst-modal > #rst-modal-shadow").children().hide()}});null!=b.data("modalbox").options.OnClose&&b.data("modalbox").options.OnClose();jQuery.removeData(b)})},
init:function(d){var b=a.extend({Type:"image",Close:"&times;",Next:"&rsaquo;",Prev:"&lsaquo;",Width:600,Height:350,CloseOnEsc:!0,ShowClose:!0,CloseHandle:null,OnInit:null,OnShow:null,OnClose:null},d);null!=b.OnInit&&b.OnInit();var f=a("div#rst-modal > div#rst-modal-loadimg"),c=a("#rst-modal"),e=a("#rst-modal-shadow > #rst-modal-content"),l=a("#rst-modal > div#rst-modal-shadow"),h=a("#rst-modal > button#rst-modal-close"),g=a("#rst-modal > button#rst-modal-nav-next"),k=a("#rst-modal > button#rst-modal-nav-prev"),
n=a("#rst-modal > div#rst-modal-title"),q=0,t=function(b){null!=b&&b.stopPropagation();c.data("currentindex")<c.data("gallerylength")-1&&(c.data("currentindex",c.data("currentindex")+1),c.data("currentindex")==c.data("gallerylength")-1?(g.hide(),k.show()):0==c.data("currentindex")?(g.show(),k.hide()):(g.show(),k.show()),e.stop(!0,!0).animate({opacity:0},{complete:function(){s(c.data("modalbox").options.Type,a("[rel = '"+c.data("galleryname")+"' ][ rst-modal-index = '"+c.data("currentindex")+"']"))}}))},
u=function(b){null!=b&&b.stopPropagation();0<c.data("currentindex")&&(c.data("currentindex",c.data("currentindex")-1),c.data("currentindex")==c.data("gallerylength")-1?(g.hide(),k.show()):0==c.data("currentindex")?(g.show(),k.hide()):(g.show(),k.show()),e.stop(!0,!0).animate({opacity:0},{complete:function(){s(c.data("modalbox").options.Type,a("[rel = '"+c.data("galleryname")+"' ][ rst-modal-index = '"+c.data("currentindex")+"']"))}}))},p=function(){/Windows Phone/.test(navigator.userAgent)&&a(window).scrollTop(0);
e=a("#rst-modal-content");e.css("margin-top",e.outerHeight()/2*-1);e.css("margin-left",e.outerWidth()/2*-1)},s=function(b,d){a(window).width();a(window).height();var g=c.data("modalbox").options.Width,k=c.data("modalbox").options.Height,m=c.data("modalbox").options,h={};n.html("").hide();l.children().remove();e=a("<div id='rst-modal-content'></div>");e.appendTo(l);"image"==b?(f.show(),g=a("<img />"),g.attr("src",d.attr("href")),e.css("width","90%"),g.appendTo(e),e.addClass("rst-modal-imagecontent"),
g.bind("error",function(){f.hide();e.html("Requested image does not exist");e.css("display","inline-block");e.css("background-color","#fff");e.css("padding","10px");e.width(m.Width);p();n.html("").hide();e.animate({opacity:1},{complete:function(){p();null!=m.OnShow&&m.OnShow(c.data("currentindex"))}})}),g.bind("load",function(){f.hide();void 0!=d.attr("title")&&""!=d.attr("title")&&n.html(d.attr("title")).show();a(this).height()>=90*a(window).height()/100&&a(this).height(90*a(window).height()/100-
(e.outerHeight(!0)-e.height()));e.width(a(this).outerWidth());p();e.animate({opacity:1},{complete:function(){null!=m.OnShow&&m.OnShow(c.data("currentindex"))}})})):"iframe"==b?(h={width:g,height:k,opacity:1},f.hide(),e.addClass("rst-modal-iframecontent"),e.html("<iframe src='"+d.attr("href")+"' frameborder='0' vspace='0' hspace='0' webkitallowfullscreen='' mozallowfullscreen='' allowfullscreen='' scrolling='auto' />"),void 0!=d.attr("title")&&""!=d.attr("title")&&n.html(d.attr("title")).show(),e.css(h),
p(),e.animate({opacity:1},{queue:!1,complete:function(){null!=m.OnShow&&m.OnShow(0)}})):"inline"==b?(f.hide(),e.addClass("rst-modal-inlinecontent"),c.appendTo(a(d.attr("href")).parent()),a(d.attr("href")).show().appendTo(e),h={width:g,height:k},void 0!=d.attr("title")&&""!=d.attr("title")&&n.html(d.attr("title")).show(),e.css(h),p(),e.animate({opacity:1},{queue:!1,complete:function(){null!=m.OnShow&&m.OnShow(0)}})):"ajax"==b&&(h={width:g,height:k},f.show(),e.addClass("rst-modal-ajaxcontent"),a.get(d.attr("href"),
function(a){f.hide();e.html(a);void 0!=d.attr("title")&&""!=d.attr("title")&&n.html(d.attr("title")).show();e.css(h);p();e.animate({opacity:1},{queue:!1,complete:function(){null!=m.OnShow&&m.OnShow(0)}})}).fail(function(){f.hide();e.html("The request cannot be processed at this time.");void 0!=d.attr("title")&&""!=d.attr("title")&&n.html(d.attr("title")).show();e.css(h);p();e.animate({opacity:1},{queue:!1,complete:function(){null!=m.OnShow&&m.OnShow(0)}})}))},r=function(b){null!=b&&(b.preventDefault(),
b.stopPropagation());n.html("").hide();c.hide().fadeOut({complete:function(){"inline"==c.data("modalbox").options.Type?(a("#rst-modal > #rst-modal-shadow > #rst-modal-content").children().hide(),a("#rst-modal > #rst-modal-shadow > #rst-modal-content").children().appendTo(c.parent()),c.appendTo(a("body"))):a("#rst-modal > #rst-modal-shadow").children().remove()}});null!=c.data("modalbox").options.OnClose&&c.data("modalbox").options.OnClose();jQuery.removeData(c)};0==c.length&&(g=a("<button id='rst-modal-nav-next' type='button'>"+
b.Next+"</button>"),k=a("<button id='rst-modal-nav-prev' type='button'>"+b.Prev+"</button>"),n=a("<div id='rst-modal-title' />"),f=a("<div id='rst-modal-loadimg'></div>"),h=a("<button id='rst-modal-close' type='button'>"+b.Close+"</button>"),c=a("<div id='rst-modal'></div>"),e=a("<div id='rst-modal-content'></div>"),l=a("<div id='rst-modal-shadow'></div>"),k.appendTo(c),n.appendTo(c),g.appendTo(c),h.appendTo(c),f.appendTo(c),l.appendTo(c),c.appendTo(a("body")),g.click(t),k.click(u),h.click(function(c){r(c);
/Windows Phone/.test(navigator.userAgent)&&a(window).scrollTop(q)}),a(document).keyup(function(b){27==b.keyCode&&c.data("modalbox").options.CloseOnEsc&&(r(null),a(window).scrollTop(q));37==b.keyCode&&k.is(":visible")&&u(null);39==b.keyCode&&g.is(":visible")&&t(null)}),a(window).resize(function(){c.is(":visible")&&p()}),a(window).scroll(function(){q=a(window).scrollTop();c.is(":visible")&&p()}));return this.each(function(){var d=a(this);d.data("modalbox")||d.data("modalbox",{options:b});d.click(function(b){null!=
b&&b.preventDefault();c.data("modalbox",{options:d.data("modalbox").options});if(null!=c.data("modalbox").options.CloseHandle)try{c.data("modalbox").options.CloseHandle.unbind("click",r),c.data("modalbox").options.CloseHandle.click(r)}catch(e){console&&console.log(e)}c.data("gallerylength",0);b=d.attr("rel");""!=b&&(c.data("gallerylength",a("[rel = '"+b+"']").length),c.data("galleryname",b),a("[rel = '"+b+"']").each(function(b){a(this).attr("rst-modal-index",b)}));h.show();0==c.data("modalbox").options.ShowClose&&
h.hide();0<c.data("gallerylength")?(g.show(),k.show()):(g.hide(),k.hide());""!=d.attr("rst-modal-index")?c.data("currentindex",parseInt(d.attr("rst-modal-index"),10)):c.data("currentindex",0);0<c.data("gallerylength")&&(c.data("currentindex")==c.data("gallerylength")-1?(g.hide(),k.show()):0==c.data("currentindex")?(g.show(),k.hide()):(g.show(),k.show()));c.fadeIn();s(c.data("modalbox").options.Type,d)})})}};a.fn.modalbox=function(d){if(q[d])return q[d].apply(this,Array.prototype.slice.call(arguments,
1));if("object"!==typeof d&&d)a.error("Method "+d+" does not exist on jQuery.modalbox");else return q.init.apply(this,arguments)}})(jQuery);