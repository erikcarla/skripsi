(function(c,l,m){var f,k;k={showAvatars:!0,avatarSize:32,maxSuggestions:6};f=function(){function e(a,b){this.element=a;"function"===typeof b&&(b={onpick:b});this.element=c(this.element);this.settings=c.extend({},k,b);this.init()}e.prototype.init=function(){this.friends=this.getFriendList();this.list=this.createSuggestionList();this.element.on("keyup.fbac",function(a){return function(b){switch(b.which){case 40:return a.changeSelection("down");case 38:return a.changeSelection("up");case 13:return a.submit();
default:return a.filter(c(b.currentTarget).val())}}}(this));this.list.on("click",".fbac-suggestion",function(a){return function(b){a.selected=c(b.currentTarget);return a.submit()}}(this));return this.list.on("mouseover",".fbac-suggestion",function(a){return function(b){a.selected.removeClass("fbac-selected");return a.selected=c(b.currentTarget).addClass("fbac-selected")}}(this))};e.prototype.getFriendList=function(){var a;a=[];FB.api("/me/friends/?fields=name",function(b){return function(d){var c,
e,f,g,h;g=d.data;h=[];c=e=0;for(f=g.length;e<f;c=++e)d=g[c],h.push(a.push({index:c,id:d.id,name:d.name,picture:b.settings.showAvatars?"http://graph.facebook.com/"+d.id+"/picture?width="+b.settings.avatarSize+"&height="+b.settings.avatarSize:void 0}));return h}}(this));return a};e.prototype.createSuggestionList=function(){var a;a=c("<div>").addClass("fbac-suggestion-list");a.insertAfter(this.element);return a};e.prototype.getCurrentSuggestions=function(a){var b,d;a=a.toLowerCase();d=[];for(b=0;d.length<
this.settings.maxSuggestions&&b<this.friends.length;)-1<this.friends[b].name.toLowerCase().indexOf(a)&&d.push(this.friends[b]),b++;return d};e.prototype.generateSuggestion=function(a){var b,d;d=c("<div>").addClass("fbac-suggestion").data("index",a.index);b=c("<span>").addClass("fbac-suggestion-name").text(a.name);this.settings.showAvatars&&(a=c("<img>").addClass("fbac-suggestion-avatar").attr({src:a.picture,width:this.settings.avatarSize,height:this.settings.avatarSize}),a.appendTo(d));b.appendTo(d);
return d};e.prototype.filter=function(a){var b,d,c;this.list.empty();if(""!==a){b=this.getCurrentSuggestions(a);d=0;for(c=b.length;d<c;d++)a=b[d],this.list.append(this.generateSuggestion(a));return this.selected=this.list.children(".fbac-suggestion:first").addClass("fbac-selected")}};e.prototype.changeSelection=function(a){a=this.selected["down"===a?"next":"prev"](".fbac-suggestion");if(0<a.length)return this.selected.removeClass("fbac-selected"),this.selected=a.addClass("fbac-selected")};e.prototype.submit=
function(){var a;a=this.selected.data("index");a=this.friends[a];this.settings.showAvatars||(a.picture="http://graph.facebook.com/"+a.id+"/picture?width="+this.settings.avatarSize+"&height="+this.settings.avatarSize);this.settings.onpick.call(this.element,a);this.element.val("");return this.list.empty()};return e}();return c.fn.facebookAutocomplete=function(e){return this.each(function(){if(!c.data(this,"plugin_facebookAutocomplete"))return c.data(this,"plugin_facebookAutocomplete",new f(this,e))})}})(jQuery,
window,document);